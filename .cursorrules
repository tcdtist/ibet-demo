{
  "rules": [
    {
      "description": "Architect Agent: Äá»‹nh nghÄ©a kiáº¿n trÃºc dá»± Ã¡n, cáº¥u trÃºc thÆ° má»¥c, config CI/CD, Bun/Next/Supabase.",
      "patterns": [
        "**/*"
      ],
      "prompts": [
        "Báº¡n lÃ  Architect. HÃ£y táº¡o cáº¥u trÃºc thÆ° má»¥c vÃ  file cáº§n thiáº¿t cho dá»± Ã¡n 'igaming-demo'. Stack: Next.js 14 App Router + Supabase + TailwindCSS + TypeScript + Bun. Output: cÃ¢y thÆ° má»¥c + ná»™i dung file cÆ¡ báº£n (package.json, tsconfig.json, tailwind.config.ts, .env.example, .github/workflows/ci.yml)."
      ]
    },
    {
      "description": "Auth Agent: Setup Supabase Auth, middleware Next.js, session provider, hooks login/logout.",
      "patterns": [
        "src/lib/**",
        "src/app/login/**",
        "src/middleware.ts"
      ],
      "prompts": [
        "Báº¡n lÃ  Auth Agent. HÃ£y triá»ƒn khai module Auth cho dá»± Ã¡n 'igaming-demo': Supabase Auth (email/password + Google), middleware báº£o vá»‡ route, SupabaseProvider trong layout.tsx, hooks useUser(), useLogin(), useLogout()."
      ]
    },
    {
      "description": "CMS Agent: CRUD ná»™i dung, upload file, trang quáº£n trá»‹ CMS.",
      "patterns": [
        "src/app/admin/**",
        "src/app/api/posts/**",
        "src/components/cms/**"
      ],
      "prompts": [
        "Báº¡n lÃ  CMS Agent. Táº¡o module CMS cho 'igaming-demo': Model Post (id, title, slug, content, published_at), API Routes CRUD, Admin UI danh sÃ¡ch/táº¡o/sá»­a post, Upload áº£nh qua Supabase Storage."
      ]
    },
    {
      "description": "SEO Agent: Tá»‘i Æ°u SEO, meta tags, structured data, sitemap, robots.txt.",
      "patterns": [
        "src/lib/seo.ts",
        "src/app/sitemap.ts",
        "src/app/robots.ts"
      ],
      "prompts": [
        "Báº¡n lÃ  SEO Agent. Táº¡o setup SEO cho 'igaming-demo': Dynamic meta (title, description, og:image), structured data JSON-LD, sitemap.xml vÃ  robots.txt tá»± Ä‘á»™ng."
      ]
    },
    {
      "description": "Dashboard Agent: User/Admin dashboard, role-based access.",
      "patterns": [
        "src/app/dashboard/**",
        "src/app/admin/**",
        "src/components/dashboard/**"
      ],
      "prompts": [
        "Báº¡n lÃ  Dashboard Agent. Táº¡o UI dashboard cho 'igaming-demo': User Dashboard (profile, lá»‹ch sá»­ hoáº¡t Ä‘á»™ng), Admin Dashboard (thá»‘ng kÃª user, post), role-based access (admin, user)."
      ]
    },
    {
      "instruction": "## ğŸ§  SMART COMMIT RULES (Optimized)\n\n### CRITICAL PRINCIPLES\n1. Always analyze **ALL staged files TOGETHER** before deciding commit type.\n   - âŒ Do NOT decide based on the first or single file.\n   - âœ… Must wait until ALL files are processed.\n2. Commit type must reflect the **most impactful change**.\n   - Revised Priority: fix > feat > hotfix > perf > docs > test > config > build > style > ci > chore > beep > refactor.\n3. Only use `feat` if the change delivers **clear, user-facing NEW functionality** (UI, endpoint, CLI, new feature flag).\n   - âŒ Not allowed for: constants, messages, configs, renaming, refactors, or invisible changes.\n4. If changes span multiple categories, pick the **dominant type**.\n   - Example: fix + docs â†’ use `fix`.\n   - If no dominant type â†’ use `chore`.\n\n---\n\n## FORMAT RULES\n- `[optional emoji] type(scope): description`\n- Max 72 chars, single line, no trailing period\n- Imperative mood: add, fix, update, remove, create\n- Emoji allowed only at start (optional)\n\n---\n\n## TYPE DECISION TREE\n\n### 1. ğŸ› fix â†’ BUG FIXES (highest priority)\n- Broken logic, crash fixes, validation, errors, regressions\n\n### 2. âœ¨ feat â†’ NEW FUNCTIONALITY (strict)\n- Only if NEW visible feature is added\n- New endpoints, UI components, CLI commands, user flows\n- âŒ Never use for constants, test data, or small tweaks\n\n### 3. ğŸ”¥ hotfix â†’ CRITICAL FIXES\n- Urgent production issues, security patches, data corruption\n\n### 4. âš¡ perf â†’ PERFORMANCE\n- Query optimization, caching, rendering improvements\n\n### 5. ğŸ“ docs â†’ DOCUMENTATION\n- README, inline comments, API docs\n\n### 6. ğŸ§ª test â†’ TESTS\n- Unit, integration, fixtures, mocks\n\n### 7. ğŸ”§ config â†’ CONFIGURATION\n- .env, eslint, prettier, app settings, constants, error codes\n\n### 8. ğŸ“¦ build â†’ BUILD/DEPENDENCIES\n- package.json, Webpack, bundler changes\n\n### 9. ğŸ’„ style â†’ STYLING\n- Formatting, indentation, whitespace (no behavior change)\n\n### 10. ğŸš€ ci â†’ CI/CD\n- GitHub Actions, Jenkins, deployment scripts\n\n### 11. ğŸ§¹ chore â†’ MAINTENANCE\n- Repo housekeeping, scripts, version bumps\n- Mixed small changes without dominant type\n\n### 12. ğŸ“‹ draft â†’ DRAFT/EXPERIMENT\n- Work in progress, spike solutions\n\n### 13. ğŸ”Š beep â†’ MINOR TWEAKS\n- Typos, labels, tiny UI adjustments\n\n### 14. âª revert â†’ REVERT\n- Format: revert: revert \"original commit message\"\n\n### 15. â™»ï¸ refactor â†’ RESTRUCTURE (last resort)\n- Pure reorganization, no behavior change\n\n---\n\n## SCOPE RULES\n- Use the primary module: api, ui, auth, db, config, admin, user\n- Lowercase, hyphenated: user-profile, chat-room\n- Omit scope if multiple unrelated areas\n\n---\n\n## DESCRIPTION RULES\n- Start with strong verb: add, fix, remove, create, update, implement\n- Be specific: \"add OAuth2 login flow\" not \"add login\"\n- Describe WHAT changed, not HOW or WHY\n- No file paths or ticket numbers\n\n---\n\n## EMOJI MAP\nâœ¨ feat, ğŸ› fix, ğŸ”¥ hotfix, âš¡ perf, ğŸ“ docs, ğŸ§ª test\nğŸ’„ style, ğŸ“¦ build, ğŸš€ ci, ğŸ”§ config, ğŸ§¹ chore, ğŸ“‹ draft\nğŸ”Š beep, âª revert, â™»ï¸ refactor\n\n---\n\n## MULTI-FILE EXAMPLES\n- Fix bug + update README â†’ ğŸ› fix(api): handle null user data in profile endpoint\n- Add feature + update docs â†’ âœ¨ feat(auth): add OAuth2 login & update docs\n- Refactor utils + style fixes â†’ â™»ï¸ refactor(utils): extract date formatter\n- Change eslint + constants â†’ ğŸ”§ config: update eslint rules & error codes\n- Small typo in UI â†’ ğŸ”Š beep(ui): correct button label\n- Mixed docs + style â†’ ğŸ§¹ chore: update docs and lint fixes",
      "pattern": "commit"
    },
    {
      "instruction": "### ğŸ” COMMIT ANALYSIS CHECKLIST (Strict)\n\nAlways review **all staged files together**:\n1. New user-facing functionality? â†’ `feat`\n2. Fix broken behavior? â†’ `fix`\n3. Urgent production/security? â†’ `hotfix`\n4. Performance improvement? â†’ `perf`\n5. Documentation only? â†’ `docs`\n6. Test changes? â†’ `test`\n7. Config, constants, error codes? â†’ `config`\n8. Build/dependencies? â†’ `build`\n9. Formatting only? â†’ `style`\n10. CI/CD pipeline? â†’ `ci`\n11. Repo maintenance? â†’ `chore`\n12. Draft/experiment? â†’ `draft`\n13. Minor tweak/typo? â†’ `beep`\n14. Revert? â†’ `revert`\n15. Pure restructure, same behavior? â†’ `refactor`\n\n---\n\nâš ï¸ RULES TO AVOID MISTAKES\n- âŒ Do NOT mark `feat` unless feature is **visible to users**\n- âŒ Do NOT stop analysis after first file\n- âœ… For mixed changes, pick the **dominant type**\n- âœ… If no dominant type â†’ use `chore`\n- âœ… Constants/messages/configs NEVER count as `feat`",
      "pattern": "commit-analysis"
    }
  ]
}